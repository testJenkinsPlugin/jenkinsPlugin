<?jelly escape-by-default='true' encoding='UTF-8'?>

<j:jelly xmlns:j="jelly:core"
   xmlns:st="jelly:stapler"
   xmlns:d="jelly:define"
   xmlns:l="/lib/layout"
   xmlns:t="/lib/hudson"
   xmlns:f="/lib/form"
   xmlns:i="jelly:fmt"
   xmlns:p="/lib/hudson/project"
   xmlns:g="glide"
   >


    <div name="builders${builderSuffix}" class="builders-group">
        <label onclick="configurator.closeElement(this)" class="close-builder" name="closeBuilder">X</label>
        <!--<label>${builderStatus}</label>-->
        <j:if test="${builderStatus.equals('DELETED')}">
        <label class="projectToBuild_status_deleted">DELETED! </label>
    </j:if>
        <j:if test="${builderStatus.equals('NEW')}">
            <label class="projectToBuild_status_new">NEW! </label>
        </j:if>
        <div class="div-drop-down">
            <j:if test="${view_old_builder != null and view_old_builder.getBuilder() != null}">
                <label style=" float: right; color: brown;">${view_old_builder.getBuilder()}</label>
                <br/>
            </j:if>
            <label>Builder:</label>
            <select name="builder" style="float: right;">

                <j:forEach items="${builders}" var="build" indexVar="i">
                    <j:if test="${build.getValue() == view.getBuilder()}">
                        <option selected="selected" value="${build.getValue()}">${build.getValue()}</option>
                    </j:if>
                    <j:if test="${build.getValue() != view.getBuilder()}">
                        <option value="${build.getValue()}">${build.getValue()}</option>
                    </j:if>
                </j:forEach>
            </select>
        </div>

        <div class="div-drop-down">
            <j:if test="${view_old_builder != null and view_old_builder.getPlatform() != null}">
                <label style="float: right; color: brown;">${view_old_builder.getPlatform()}</label>
                <br/>
            </j:if>
            <label>Platform:</label>
            <select name="platform" style="float: right;">
                <j:forEach items="${platforms}" var="platform" indexVar="i">
                    <j:if test="${platform == view.getPlatform()}">
                        <option selected="selected" value="${platform}">${platform}</option>
                    </j:if>
                    <j:if test="${platform != view.getPlatform()}">
                        <option value="${platform}">${platform}</option>
                    </j:if>
                </j:forEach>
            </select>
        </div>
<br/>
        <div class="builder-config">
            <j:if test="${view_old_builder != null}">
                <label>${view_old_builder.getConfigurationsAsString()}</label>
                <br/>
            </j:if>
                <label>Configuration:</label>

            <j:if test="${view.isConfigChecked('RELEASE')}">
                <input type="checkbox" checked="checked" name="release"/>Release
            </j:if>
            <j:if test="${!view.isConfigChecked('RELEASE')}">
                <input type="checkbox" name="release"/>Release
            </j:if>

            <j:if test="${view.isConfigChecked('DEBUG')}">
                <input type="checkbox" checked="checked" name="debug"/>Debug
            </j:if>
            <j:if test="${!view.isConfigChecked('DEBUG')}">
                <input type="checkbox" name="debug"/>Debug
            </j:if>


            <j:if test="${view.isConfigChecked('OTHER')}">
                <input type="checkbox" name="other" checked="checked" onclick="configurator.disableOtherConfig(this)"/>Other
                <input type="text" name="userConfig" value="${view.getUserConfig()}" field="userConfig_${divID}"/>
            </j:if>
            <j:if test="${!view.isConfigChecked('OTHER')}">
                <input type="checkbox" name="other" onclick="configurator.disableOtherConfig(this)"/>Other
                <input type="text" name="userConfig"  class="hidden" field="userConfig_${divID}"/>
            </j:if>
        </div>
<br/>

        <j:if test="${isAdmin}">
            <div class="args">
                <label>Command line args:</label><br/>

                <j:if test="${view_old_builder != null and view_old_builder.getBuilderArgs() != null}">
                <label style="color: brown;" >"${view_old_builder.getBuilderArgs()}"</label>
                <br/>
            </j:if>
                <input type="text" name="builderArgs" value = "${view.getBuilderArgs()}"/>
                <input type="hidden" name="guid" value = "${view.getGuid()}"/>
            </div>
        </j:if>

        <j:if test="${!isAdmin}">
            <div class="args display-none">
                <label>Command line args:</label><br/>
                <input type="text" name="builderArgs" value = "${view.getBuilderArgs()}"/>
                <input type="hidden" name="guid" value = "${view.getGuid()}"/>

            </div>
        </j:if>

    </div>
    <j:forEach items="s" var="config" indexVar="i">
    </j:forEach>
</j:jelly>